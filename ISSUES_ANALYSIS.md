# é¡¹ç›®é—®é¢˜æ·±åº¦åˆ†æ

## ğŸ” é—®é¢˜åˆ†ç±»

### 1. æ¶æ„é—®é¢˜ï¼ˆä¸¥é‡ï¼‰

#### 1.1 å¤šåè®®æ··ä¹± âš ï¸âš ï¸âš ï¸
**é—®é¢˜æè¿°**ï¼š
- åŒæ—¶ä½¿ç”¨ PeerJSã€WebSocketã€Socket.IOã€HTTP å››ç§åè®®
- æ¯ç§åè®®æœ‰ç‹¬ç«‹çš„è¿æ¥ç®¡ç†å’Œé”™è¯¯å¤„ç†
- åè®®é—´åˆ‡æ¢é€»è¾‘å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™

**å½±å“**ï¼š
- ä»£ç å¤æ‚åº¦é«˜ï¼Œéš¾ä»¥ç»´æŠ¤
- è°ƒè¯•å›°éš¾ï¼Œé—®é¢˜å®šä½è€—æ—¶
- æ€§èƒ½å¼€é”€å¤§ï¼ˆå¤šä¸ªè¿æ¥ï¼‰
- ç”¨æˆ·ä½“éªŒä¸ä¸€è‡´

**è¯æ®**ï¼š
```typescript
// serviceManager.ts ä¸­åŒæ—¶åˆå§‹åŒ–å¤šä¸ªæœåŠ¡
const peerTransferService = await initPeerTransferService(...);
const transferServer = await initTransferServer(...);
const webServer = await initWebServer(...);
```

**ä¼˜å…ˆçº§**ï¼šğŸ”´ P0 - ç«‹å³å¤„ç†

---

#### 1.2 æœåŠ¡è€¦åˆä¸¥é‡ âš ï¸âš ï¸
**é—®é¢˜æè¿°**ï¼š
- 4ä¸ªç‹¬ç«‹æœåŠ¡ç›¸äº’ä¾èµ–
- Discovery ä¾èµ– WebServer
- WebServer ä¾èµ– Discovery
- å¾ªç¯ä¾èµ–å¯¼è‡´åˆå§‹åŒ–é¡ºåºæ•æ„Ÿ

**å½±å“**ï¼š
- å¯åŠ¨å¤±è´¥é£é™©é«˜
- æœåŠ¡é‡å¯å›°éš¾
- å•å…ƒæµ‹è¯•å›°éš¾

**è¯æ®**ï¼š
```typescript
// serviceManager.ts
const discovery = await initDiscoveryService(...);
const webServer = await initWebServer(..., discovery);
webServer.updateLANDevice(...); // WebServer ä¾èµ– Discovery
```

**ä¼˜å…ˆçº§**ï¼šğŸ”´ P0 - ç«‹å³å¤„ç†

---

#### 1.3 çŠ¶æ€ç®¡ç†æ··ä¹± âš ï¸âš ï¸
**é—®é¢˜æè¿°**ï¼š
- è¿›åº¦çŠ¶æ€åœ¨å¤šä¸ªç»„ä»¶é—´ä¼ é€’
- ä½¿ç”¨ React state + EventEmitter + IPC
- æ²¡æœ‰ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
- çŠ¶æ€åŒæ­¥å›°éš¾

**å½±å“**ï¼š
- è¿›åº¦æ˜¾ç¤ºä¸å‡†ç¡®
- çŠ¶æ€ä¸ä¸€è‡´
- éš¾ä»¥è°ƒè¯•
- æ€§èƒ½é—®é¢˜ï¼ˆé¢‘ç¹æ¸²æŸ“ï¼‰

**è¯æ®**ï¼š
```typescript
// App.tsx ä¸­å¤§é‡çš„ useState
const [sendProgress, setSendProgress] = useState<TransferProgress | null>(null);
const [receiveProgress, setReceiveProgress] = useState<TransferProgress | null>(null);
const [downloadProgressMap] = useState<Map<...>>(new Map());
// ... è¿˜æœ‰ 20+ ä¸ª state
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ P1 - é«˜ä¼˜å…ˆçº§

---

### 2. æ€§èƒ½é—®é¢˜ï¼ˆä¸¥é‡ï¼‰

#### 2.1 æ–‡ä»¶ä¼ è¾“æ— åˆ†ç‰‡ âš ï¸âš ï¸âš ï¸
**é—®é¢˜æè¿°**ï¼š
- å¤§æ–‡ä»¶ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜
- æ²¡æœ‰åˆ†ç‰‡ä¼ è¾“æœºåˆ¶
- å†…å­˜å ç”¨è¿‡é«˜

**å½±å“**ï¼š
- å¤§æ–‡ä»¶ä¼ è¾“å¤±è´¥
- æµè§ˆå™¨å´©æºƒï¼ˆç§»åŠ¨ç«¯ï¼‰
- æ— æ³•ä¼ è¾“ GB çº§æ–‡ä»¶

**è¯æ®**ï¼š
```typescript
// useFileTransfer.ts
const formData = new FormData();
formData.append('file', fileItem.file); // æ•´ä¸ªæ–‡ä»¶
xhr.send(formData); // ä¸€æ¬¡æ€§å‘é€
```

**ä¼˜å…ˆçº§**ï¼šğŸ”´ P0 - ç«‹å³å¤„ç†

---

#### 2.2 æ— æ–­ç‚¹ç»­ä¼  âš ï¸âš ï¸
**é—®é¢˜æè¿°**ï¼š
- ä¼ è¾“ä¸­æ–­åéœ€è¦é‡æ–°å¼€å§‹
- æ²¡æœ‰ä¿å­˜ä¼ è¾“çŠ¶æ€
- æµªè´¹å¸¦å®½å’Œæ—¶é—´

**å½±å“**ï¼š
- ç”¨æˆ·ä½“éªŒå·®
- å¤§æ–‡ä»¶ä¼ è¾“å›°éš¾
- ç½‘ç»œä¸ç¨³å®šæ—¶æ— æ³•ä½¿ç”¨

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ P1 - é«˜ä¼˜å…ˆçº§

---

#### 2.3 æ— å¹¶å‘æ§åˆ¶ âš ï¸
**é—®é¢˜æè¿°**ï¼š
- å¯ä»¥åŒæ—¶ä¼ è¾“æ— é™ä¸ªæ–‡ä»¶
- æ²¡æœ‰é˜Ÿåˆ—ç®¡ç†
- æ²¡æœ‰ä¼˜å…ˆçº§æ§åˆ¶

**å½±å“**ï¼š
- ç½‘ç»œæ‹¥å¡
- ä¼ è¾“é€Ÿåº¦æ…¢
- ç³»ç»Ÿèµ„æºè€—å°½

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ P1 - é«˜ä¼˜å…ˆçº§

---

### 3. å®‰å…¨é—®é¢˜ï¼ˆä¸¥é‡ï¼‰

#### 3.1 æ— èº«ä»½éªŒè¯ âš ï¸âš ï¸âš ï¸
**é—®é¢˜æè¿°**ï¼š
- ä»»ä½•äººéƒ½å¯ä»¥è¿æ¥
- æ²¡æœ‰é…å¯¹æœºåˆ¶
- æ²¡æœ‰è®¿é—®æ§åˆ¶

**å½±å“**ï¼š
- å®‰å…¨é£é™©é«˜
- éšç§æ³„éœ²
- æ¶æ„æ”»å‡»

**è¯æ®**ï¼š
```typescript
// webServer.ts
// ä»»ä½•å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥ï¼Œæ²¡æœ‰éªŒè¯
socket.on('connection', (socket) => {
  // ç›´æ¥æ¥å—è¿æ¥
});
```

**ä¼˜å…ˆçº§**ï¼šğŸ”´ P0 - ç«‹å³å¤„ç†

---

#### 3.2 æ— åŠ å¯†ä¼ è¾“ âš ï¸âš ï¸
**é—®é¢˜æè¿°**ï¼š
- ä½¿ç”¨ HTTP æ˜æ–‡ä¼ è¾“
- æ–‡ä»¶å†…å®¹æœªåŠ å¯†
- å…ƒæ•°æ®æœªåŠ å¯†

**å½±å“**ï¼š
- æ•°æ®å¯è¢«çªƒå¬
- ä¸­é—´äººæ”»å‡»é£é™©
- ä¸ç¬¦åˆå®‰å…¨æ ‡å‡†

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ P1 - é«˜ä¼˜å…ˆçº§

---

### 4. ä»£ç è´¨é‡é—®é¢˜

#### 4.1 ä»£ç é‡å¤ âš ï¸
**é—®é¢˜æè¿°**ï¼š
- æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯å¤§é‡é‡å¤ä»£ç 
- æ²¡æœ‰å…±äº«ç»„ä»¶åº“
- é€»è¾‘é‡å¤å®ç°

**å½±å“**ï¼š
- ç»´æŠ¤æˆæœ¬é«˜
- å®¹æ˜“å‡ºç°ä¸ä¸€è‡´
- ä¿®å¤ bug éœ€è¦æ”¹å¤šå¤„

**ç»Ÿè®¡**ï¼š
- `HistoryItem.tsx` åœ¨ 3 ä¸ªåœ°æ–¹é‡å¤
- æ–‡ä»¶ä¼ è¾“é€»è¾‘é‡å¤ 2 æ¬¡
- è®¾å¤‡å‘ç°é€»è¾‘é‡å¤ 2 æ¬¡

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ P2 - ä¸­ä¼˜å…ˆçº§

---

#### 4.2 é”™è¯¯å¤„ç†ä¸è¶³ âš ï¸
**é—®é¢˜æè¿°**ï¼š
- ç¼ºä¹ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- é”™è¯¯ä¿¡æ¯ä¸å‹å¥½
- æ²¡æœ‰é”™è¯¯æ¢å¤æœºåˆ¶

**å½±å“**ï¼š
- ç”¨æˆ·ä½“éªŒå·®
- è°ƒè¯•å›°éš¾
- åº”ç”¨å´©æºƒ

**è¯æ®**ï¼š
```typescript
// å¾ˆå¤šåœ°æ–¹åªæ˜¯ console.error
catch (error) {
  console.error('[SendFiles] Send error:', error);
  setIsSending(false);
  // æ²¡æœ‰ç”¨æˆ·æç¤ºï¼Œæ²¡æœ‰é‡è¯•
}
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ P1 - é«˜ä¼˜å…ˆçº§

---

#### 4.3 ç¼ºå°‘æµ‹è¯• âš ï¸âš ï¸
**é—®é¢˜æè¿°**ï¼š
- æ²¡æœ‰å•å…ƒæµ‹è¯•
- æ²¡æœ‰é›†æˆæµ‹è¯•
- æ²¡æœ‰ E2E æµ‹è¯•

**å½±å“**ï¼š
- é‡æ„é£é™©é«˜
- å›å½’é—®é¢˜å¤š
- è´¨é‡æ— æ³•ä¿è¯

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ P1 - é«˜ä¼˜å…ˆçº§

---

### 5. ç”¨æˆ·ä½“éªŒé—®é¢˜

#### 5.1 è¿›åº¦æ˜¾ç¤ºä¸å‡†ç¡® âš ï¸
**é—®é¢˜æè¿°**ï¼š
- è¿›åº¦æ¡é—ªçƒ
- è¿›åº¦ä¸åŒæ­¥
- å®ŒæˆçŠ¶æ€æ˜¾ç¤ºå»¶è¿Ÿ

**å½±å“**ï¼š
- ç”¨æˆ·å›°æƒ‘
- ä¿¡ä»»åº¦é™ä½

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ P2 - ä¸­ä¼˜å…ˆçº§

---

#### 5.2 é”™è¯¯æç¤ºä¸å‹å¥½ âš ï¸
**é—®é¢˜æè¿°**ï¼š
- é”™è¯¯ä¿¡æ¯æŠ€æœ¯åŒ–
- æ²¡æœ‰è§£å†³å»ºè®®
- æ²¡æœ‰é‡è¯•é€‰é¡¹

**å½±å“**ï¼š
- ç”¨æˆ·ä¸çŸ¥é“å¦‚ä½•å¤„ç†
- æ”¯æŒæˆæœ¬é«˜

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ P2 - ä¸­ä¼˜å…ˆçº§

---

## ğŸ“Š é—®é¢˜ç»Ÿè®¡

### æŒ‰ä¸¥é‡ç¨‹åº¦
- ğŸ”´ P0ï¼ˆä¸¥é‡ï¼‰ï¼š5 ä¸ª
- ğŸŸ¡ P1ï¼ˆé«˜ï¼‰ï¼š6 ä¸ª
- ğŸŸ¢ P2ï¼ˆä¸­ï¼‰ï¼š3 ä¸ª

### æŒ‰ç±»åˆ«
- æ¶æ„é—®é¢˜ï¼š3 ä¸ª
- æ€§èƒ½é—®é¢˜ï¼š3 ä¸ª
- å®‰å…¨é—®é¢˜ï¼š2 ä¸ª
- ä»£ç è´¨é‡ï¼š3 ä¸ª
- ç”¨æˆ·ä½“éªŒï¼š2 ä¸ª

---

## ğŸ¯ è§£å†³æ–¹æ¡ˆä¼˜å…ˆçº§

### ç¬¬ä¸€é˜¶æ®µï¼ˆå¿…é¡»ç«‹å³è§£å†³ï¼‰
1. **ç»Ÿä¸€é€šä¿¡åè®®** - è§£å†³å¤šåè®®æ··ä¹±
2. **æ·»åŠ èº«ä»½éªŒè¯** - è§£å†³å®‰å…¨é—®é¢˜
3. **å®ç°åˆ†ç‰‡ä¼ è¾“** - è§£å†³å¤§æ–‡ä»¶ä¼ è¾“é—®é¢˜
4. **è§£è€¦æœåŠ¡** - è§£å†³æœåŠ¡è€¦åˆé—®é¢˜

### ç¬¬äºŒé˜¶æ®µï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
1. **ç»Ÿä¸€çŠ¶æ€ç®¡ç†** - ä½¿ç”¨ Zustand
2. **å®ç°æ–­ç‚¹ç»­ä¼ ** - æå‡ç”¨æˆ·ä½“éªŒ
3. **æ·»åŠ å¹¶å‘æ§åˆ¶** - ä¼˜åŒ–æ€§èƒ½
4. **å®Œå–„é”™è¯¯å¤„ç†** - æå‡ç¨³å®šæ€§
5. **æ·»åŠ æµ‹è¯•** - ä¿è¯è´¨é‡

### ç¬¬ä¸‰é˜¶æ®µï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰
1. **æ¶ˆé™¤ä»£ç é‡å¤** - æå–å…±äº«ç»„ä»¶
2. **ä¼˜åŒ–è¿›åº¦æ˜¾ç¤º** - æå‡ç”¨æˆ·ä½“éªŒ
3. **æ”¹è¿›é”™è¯¯æç¤º** - æå‡ç”¨æˆ·ä½“éªŒ

---

## ğŸ’° æˆæœ¬æ•ˆç›Šåˆ†æ

### é‡æ„æˆæœ¬
- **å¼€å‘æ—¶é—´**ï¼š6 å‘¨ï¼ˆ1.5 ä¸ªæœˆï¼‰
- **äººåŠ›æˆæœ¬**ï¼š2 åå¼€å‘äººå‘˜
- **æµ‹è¯•æˆæœ¬**ï¼š1 å‘¨
- **æ€»æˆæœ¬**ï¼šçº¦ 2 ä¸ªæœˆ

### é¢„æœŸæ”¶ç›Š
- **æ€§èƒ½æå‡**ï¼š30-50%
- **ç¨³å®šæ€§æå‡**ï¼š80%
- **ç»´æŠ¤æˆæœ¬é™ä½**ï¼š50%
- **ç”¨æˆ·æ»¡æ„åº¦æå‡**ï¼š40%

### ROI åˆ†æ
- **æŠ•èµ„å›æŠ¥å‘¨æœŸ**ï¼š3-6 ä¸ªæœˆ
- **é•¿æœŸæ”¶ç›Š**ï¼šæ˜¾è‘—é™ä½ç»´æŠ¤æˆæœ¬
- **é£é™©é™ä½**ï¼šå‡å°‘å®‰å…¨éšæ‚£

---

## ğŸš¨ é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©
| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| å…¼å®¹æ€§é—®é¢˜ | ä¸­ | é«˜ | æä¾›è¿ç§»å·¥å…· |
| æ€§èƒ½å›é€€ | ä½ | é«˜ | å……åˆ†æµ‹è¯• |
| å­¦ä¹ æ›²çº¿ | ä¸­ | ä¸­ | åŸ¹è®­å’Œæ–‡æ¡£ |

### ä¸šåŠ¡é£é™©
| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| å¼€å‘å»¶æœŸ | ä¸­ | ä¸­ | åˆ†é˜¶æ®µå®æ–½ |
| ç”¨æˆ·æµå¤± | ä½ | é«˜ | Beta æµ‹è¯• |
| åŠŸèƒ½ç¼ºå¤± | ä½ | ä¸­ | åŠŸèƒ½å¯¹æ¯”æµ‹è¯• |

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- [ ] ä»£ç è¦†ç›–ç‡ > 80%
- [ ] ä¼ è¾“æˆåŠŸç‡ > 99%
- [ ] å¹³å‡ä¼ è¾“é€Ÿåº¦æå‡ > 30%
- [ ] å†…å­˜å ç”¨é™ä½ > 30%
- [ ] å¯åŠ¨æ—¶é—´å‡å°‘ > 50%

### ä¸šåŠ¡æŒ‡æ ‡
- [ ] ç”¨æˆ·æ»¡æ„åº¦ > 4.5/5
- [ ] å´©æºƒç‡ < 0.1%
- [ ] æ—¥æ´»ç”¨æˆ·å¢é•¿ > 20%
- [ ] æ”¯æŒå·¥å•å‡å°‘ > 40%

---

## ğŸ”„ æŒç»­æ”¹è¿›è®¡åˆ’

### çŸ­æœŸï¼ˆ1-3 ä¸ªæœˆï¼‰
- å®Œæˆæ¶æ„é‡æ„
- å®ç°æ ¸å¿ƒåŠŸèƒ½
- å‘å¸ƒ Beta ç‰ˆæœ¬

### ä¸­æœŸï¼ˆ3-6 ä¸ªæœˆï¼‰
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- ä¼˜åŒ–æ€§èƒ½
- æ·»åŠ æ–°åŠŸèƒ½

### é•¿æœŸï¼ˆ6-12 ä¸ªæœˆï¼‰
- æ‰©å±•å¹³å°æ”¯æŒ
- ä¼ä¸šç‰ˆåŠŸèƒ½
- äº‘åŒæ­¥åŠŸèƒ½

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-03  
**ä½œè€…**: Product Manager  
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸
